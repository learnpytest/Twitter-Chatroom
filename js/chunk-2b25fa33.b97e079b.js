(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b25fa33"],{"06bb":function(t,e,a){"use strict";a("3843")},"214b":function(t,e,a){t.exports=a.p+"img/icon_close.883c7712.svg"},2892:function(t,e,a){"use strict";a("b0a2")},3843:function(t,e,a){},8624:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"new-tweet-modal",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleTweetSubmit.apply(null,arguments)}}},[s("div",{staticClass:"new-text-box"},[s("div",{staticClass:"close-btn"},[s("button",[s("img",{attrs:{src:a("214b"),alt:""},on:{click:t.handleShowModalClick}})])]),s("div",{staticClass:"text-box"},[s("div",{staticClass:"user-info"},[s("img",{staticClass:"user-pic",attrs:{src:t._f("emptyImage")(t.currentUserPic),alt:""}})]),s("div",{staticClass:"text-area"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"form-control",attrs:{rows:"3",maxlength:"141",placeholder:"有什麽新鮮事？"},domProps:{value:t.text},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.resetEmpty.apply(null,arguments)},input:function(e){e.target.composing||(t.text=e.target.value)}}}),s("span",{staticClass:"limiter"},[t._v(t._s(t.charactersLeft))])])]),s("div",{staticClass:"tweet-btn"},[t.text.length>=140?s("p",[t._v("字數不可超過 140 字")]):t._e(),t.submitEmptyField?s("p",[t._v("內容不可空白")]):t._e(),s("button",[t._v("推文")])])])])},n=[],r=a("5530"),i=a("1da1"),o=(a("96cf"),a("2f62")),c=a("6ad5"),l=a("ac0d"),u=a("5fad"),d=a("6783"),m={mixins:[l["a"]],props:{initialShowModal:{type:Boolean,required:!0}},data:function(){return{showModal:"",limit:-1,text:"",currentUserId:"",submitEmptyField:!1,currentUserPic:{}}},created:function(){this.fetchData(),this.fetchCurrentUser()},methods:{fetchData:function(){this.showModal=this.initialShowModal},fetchCurrentUser:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,s,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u["a"].getCurrentUser();case 3:a=e.sent,s=a.data,n=s.avatar,r=s.id,t.currentUserId=r,t.currentUserPic=n,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log("error",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},handleShowModalClick:function(){this.showModal?(this.showModal=!1,this.$emit("show-modal")):(this.showModal=!0,this.$emit("show-modal"))},handleTweetSubmit:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.text.length){e.next=3;break}return t.submitEmptyField=!0,e.abrupt("return");case 3:if(!(t.text.length>140)){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,d["a"].postOneUserTweet({description:t.text});case 8:if(a=e.sent,s=a.data,"success"===s.status){e.next=12;break}throw new Error(s.message);case 12:t.$emit("updateData"),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](5),console.log("error",e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})))()},resetEmpty:function(){this.submitEmptyField=!1}},computed:Object(r["a"])({charactersLeft:function(){var t=this.text.length,e=140;return e-t+" / "+e+"剩餘字數"}},Object(o["c"])({getCurrentUser:c["k"]}))},p=m,f=(a("2892"),a("2877")),v=Object(f["a"])(p,s,n,!1,null,"7ee6236e",null);e["a"]=v.exports},9787:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"form"},[a("div",{staticClass:"form__title"},[t._t("title")],2),a("div",{staticClass:"form__header"},[t._t("logo"),t._t("header")],2),a("div",{staticClass:"form__group"},[a("label",{attrs:{for:"account"}},[t._v("帳號")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],class:["form__input"],attrs:{type:"text",id:"account",name:"account",maxlength:"20"},domProps:{value:t.account},on:{input:[function(e){e.target.composing||(t.account=e.target.value)},t.updateAccountInfo]}}),a("div",{staticClass:"limit-error"},[t.account.length>=20?a("span",{staticClass:"warning-text"},[t._v("帳號字數不可超過 20 字")]):t._e(),a("p",[t._v(t._s(t.accountCharactersLeft))])])]),a("div",{staticClass:"form__group"},[a("label",{attrs:{for:"username"}},[t._v("名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],class:["form__input"],attrs:{type:"text",id:"username",name:"username",maxlength:"50"},domProps:{value:t.username},on:{input:[function(e){e.target.composing||(t.username=e.target.value)},t.updateAccountInfo]}}),a("div",{staticClass:"limit-error"},[t.username.length>=51?a("span",{staticClass:"warning-text"},[t._v("名稱字數不可超過 50 字")]):t._e(),a("p",[t._v(t._s(t.nameCharactersLeft))])])]),a("div",{staticClass:"form__group"},[a("label",{attrs:{for:"email"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],class:["form__input"],attrs:{type:"email",id:"email",name:"email"},domProps:{value:t.email},on:{input:[function(e){e.target.composing||(t.email=e.target.value)},t.updateAccountInfo]}}),a("div")]),a("div",{staticClass:"form__group"},[a("label",{attrs:{for:"password"}},[t._v("密碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],class:["form__input"],attrs:{type:"password",id:"password",name:"password"},domProps:{value:t.password},on:{input:[function(e){e.target.composing||(t.password=e.target.value)},t.updateAccountInfo]}}),a("div")]),a("div",{staticClass:"form__group"},[a("label",{attrs:{for:"checkPassword"}},[t._v("確認密碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkPassword,expression:"checkPassword"}],class:["form__input"],attrs:{type:"password",id:"checkPassword",name:"checkPassword"},domProps:{value:t.checkPassword},on:{input:[function(e){e.target.composing||(t.checkPassword=e.target.value)},t.updateAccountInfo]}}),a("div")]),t._t("button"),a("div",{staticClass:"form__links"},[t._t("cancel")],2)],2)},n=[],r=a("1da1"),i=a("5530"),o=(a("96cf"),a("b0c0"),a("6ad5")),c=a("2f62"),l=a("5fad"),u={name:"AccountForm",props:{isSettingExistingAccount:{type:Boolean,default:!1}},data:function(){return{account:"",username:"",email:"",password:"",checkPassword:""}},created:function(){this.fetchData()},methods:Object(i["a"])({fetchData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l["a"].getCurrentUser();case 3:if(a=e.sent,s=a.data,n=a.statusText,"OK"===n){e.next=7;break}throw new Error(n);case 7:t.currentUser=s,t.account=t.isSettingExistingAccount?t.currentUser.account:"",t.username=t.isSettingExistingAccount?t.currentUser.name:"",t.email=t.isSettingExistingAccount?t.currentUser.email:"",e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()},updateAccountInfo:function(){this.setAccountInfo({account:this.account,username:this.username,email:this.email,password:this.password,checkPassword:this.checkPassword})}},Object(c["b"])({setAccountInfo:o["I"]})),computed:{nameCharactersLeft:function(){var t=this.username.length,e=50;return e-t+" / "+e},accountCharactersLeft:function(){var t=this.account.length,e=20;return e-t+" / "+e}}},d=u,m=(a("d1cb"),a("2877")),p=Object(m["a"])(d,s,n,!1,null,"1316126c",null);e["a"]=p.exports},"9aa1":function(t,e,a){},"9dd4":function(t,e,a){t.exports=a.p+"img/Logo_small.21c0a93a.svg"},a357:function(t,e,a){t.exports=a.p+"img/icon_chat.6e17a436.svg"},b0a2:function(t,e,a){},bf0d:function(t,e,a){t.exports=a.p+"img/icon_cog.2ff65de4.svg"},c4cd:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sidebar-wrapper"},[s("ul",{staticClass:"nav-links"},[s("li",[s("router-link",{attrs:{to:"#"}},[s("img",{staticClass:"logo",attrs:{src:a("9dd4"),alt:""}})])],1),s("li",[s("router-link",{attrs:{to:{name:"UserMain"}}},[s("div",{staticClass:"nav-link"},[s("img",{staticClass:"filter-orange",attrs:{src:a("dffc"),alt:""}}),s("p",{staticClass:"nav-link_text"},[t._v("首頁")])])])],1),s("li",[s("router-link",{attrs:{to:{name:"user",params:{id:t.currentUserId}}}},[s("div",{staticClass:"nav-link"},[s("img",{staticClass:"filter-orange",attrs:{src:a("8f36"),alt:""}}),s("p",{staticClass:"nav-link_text"},[t._v("個人資料")])])])],1),s("li",[s("router-link",{attrs:{to:{name:"public-room"}}},[s("div",{staticClass:"nav-link"},[s("img",{staticClass:"filter-orange",attrs:{src:a("a357"),alt:""}}),s("p",{staticClass:"nav-link_text"},[t._v("公開聊天室")])])])],1),s("li",[s("router-link",{attrs:{to:{name:"user-setting"}}},[s("div",{staticClass:"nav-link"},[s("img",{staticClass:"filter-orange",attrs:{src:a("bf0d"),alt:""}}),s("p",{staticClass:"nav-link_text"},[t._v("設定")])])])],1),s("li",{staticClass:"nav-link"},[s("button",{on:{click:t.handleShowModalClick}},[t._v("推文")])])]),s("div",{staticClass:"logout",on:{click:t.logout}},[s("router-link",{attrs:{to:"#"}},[s("div",{staticClass:"nav-link"},[s("img",{staticClass:"filter-orange",attrs:{src:a("f667"),alt:""}}),s("p",{staticClass:"nav-link_text"},[t._v("登出")])])])],1)])},n=[],r=a("1da1"),i=a("5530"),o=(a("96cf"),a("2f62")),c=a("6ad5"),l=a("5fad"),u={name:"Sidebar",props:{initialShowModal:{type:Boolean,required:!0}},data:function(){return{showModal:"",currentUserId:""}},created:function(){this.getCurrentUser()},methods:Object(i["a"])(Object(i["a"])({},Object(o["b"])({revokeAuthentication:c["H"]})),{},{logout:function(){this.revokeAuthentication(),this.$router.push("/login")},handleShowModalClick:function(){this.showModal=!0,this.$emit("show-modal")},getCurrentUser:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l["a"].getCurrentUser();case 3:if(a=e.sent,s=a.data,n=a.statusText,"OK"===n){e.next=7;break}throw new Error(n);case 7:t.currentUserId=s.id,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()}})},d=u,m=(a("c9ce"),a("2877")),p=Object(m["a"])(d,s,n,!1,null,"23a5645b",null);e["a"]=p.exports},c9ce:function(t,e,a){"use strict";a("cc13")},cc13:function(t,e,a){},ce99:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[t.showModal?a("div",{staticClass:"new-tweet-modal"},[a("NewTweetModal",{attrs:{initialShowModal:t.showModal},on:{"show-modal":t.modalToggle}})],1):t._e(),a("div",{staticClass:"usermain"},[a("div",{staticClass:"sidebar"},[a("Sidebar",{attrs:{initialShowModal:t.showModal},on:{"show-modal":t.modalToggle}})],1),a("div",{staticClass:"main"},[a("div",{staticClass:"tweets"},[a("AccountForm",{staticClass:"form",attrs:{isSettingExistingAccount:!0},scopedSlots:t._u([{key:"title",fn:function(){return[a("span",{staticClass:"form__txt"},[t._v("帳號設定")])]},proxy:!0},{key:"button",fn:function(){return[a("div",{staticClass:"to-right"},[a("PrimaryButtonSmall",{staticClass:"form__btn",nativeOn:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.saveUserSetting.apply(null,arguments)}}},[t._v("儲存 ")])],1)]},proxy:!0}])})],1)])])])},n=[],r=a("5530"),i=a("c4cd"),o=a("9787"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"button button--small"},[t._t("default")],2)},l=[],u={name:"PrimaryButtonSmall"},d=u,m=(a("d009"),a("2877")),p=Object(m["a"])(d,c,l,!1,null,"36bf3f45",null),f=p.exports,v=a("8624"),h=a("2f62"),g=a("6ad5"),w={name:"UserSetting",components:{AccountForm:o["a"],PrimaryButtonSmall:f,Sidebar:i["a"],NewTweetModal:v["a"]},data:function(){return{showModal:!1}},methods:Object(r["a"])(Object(r["a"])({saveUserSetting:function(){this.putAccount()}},Object(h["b"])({putAccount:g["D"]})),{},{modalToggle:function(){this.showModal?this.showModal=!1:this.showModal=!0}})},_=w,b=(a("06bb"),Object(m["a"])(_,s,n,!1,null,"09558284",null));e["default"]=b.exports},d009:function(t,e,a){"use strict";a("9aa1")},d1cb:function(t,e,a){"use strict";a("e39f")},e39f:function(t,e,a){}}]);
//# sourceMappingURL=chunk-2b25fa33.b97e079b.js.map